<TMPL_IF NAME=ZONES_UPDATED>
    sonos.zones = <TMPL_VAR NAME=ZONES_JSON>;
    drawZones();
    stopspin();

<TMPL_ELSE>

    var i = 0;
    <TMPL_LOOP NAME=ZONES_LOOP>
      <TMPL_IF NAME=ACTIVE_UPDATED>
        zone = "<TMPL_VAR NAME=ACTIVE_ZONEID>";
        sonos.zones[i] = <TMPL_VAR NAME=ACTIVE_JSON>;
        drawControl(zone);
        drawQueue(zone);
      </TMPL_IF>
      i++;
    </TMPL_LOOP>
</TMPL_IF>

<TMPL_LOOP NAME=ALL_QUEUE_LOOP><TMPL_IF NAME=QUEUE_UPDATED>
zone = "<TMPL_VAR NAME=QUEUE_ZONEID>";
sonos.queues[zone] = <TMPL_VAR NAME=QUEUE_JSON>;
drawQueue(zone);
stopspin();
</TMPL_IF></TMPL_LOOP>

<TMPL_IF NAME=MUSIC_UPDATED>
path = decodeURIComponent("<TMPL_VAR NAME=MUSIC_PATH>");
sonos.music[path] = <TMPL_VAR NAME=MUSIC_JSON>;
drawMusic(path);
stopspin();
</TMPL_IF>

sonos._setLastUpdate(<TMPL_VAR NAME=LAST_UPDATE>); // <TMPL_VAR NAME=LAST_UPDATE_READABLE>  
